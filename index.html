<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pi High Score Challenge</title>
    <style>
        /* Existing styles remain the same */
        :root {
            --primary: #FFA726;
            --secondary: #4FC3F7;
            --background: #2D2D2D;
            --accent: #FF7043;
        }

        /* ... (keep previous styles) ... */

        /* Updated player coin style */
        .pi-coin {
            background: #FFA726;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #000;
            font-weight: bold;
            font-size: 24px;
        }
    </style>
</head>
<body>
    <!-- Keep previous HTML structure -->

    <script>
        // Modified player object
        const player = {
            x: 50,
            y: 0,
            diameter: 50,  // Changed to diameter for circle
            yVelocity: 0,
            isJumping: false,
            color: '#FFA726'
        };

        // Updated jump button fix
        function startGame() {
            if (!gameStarted) {
                gameStarted = true;
                gameOver = false;
                player.y = canvas.height - GROUND_HEIGHT - player.diameter;
                document.getElementById('startBtn').disabled = true;
                document.getElementById('mobileControls').style.display = 'flex';
                document.getElementById('jumpBtn').style.display = 'block'; // Add this line
                gameLoop();
            }
        }

        // Simplified animations
        function update() {
            // ... previous code ...
            
            // Reduced screen shake intensity
            if (gameOver) screenShake = 5;
            
            // Slower obstacle glow
            obstacles.forEach(obs => {
                obs.x -= gameSpeed;
                obs.glow = Math.sin(Date.now()/200) * 3 + 3; // Slower glow
            });
        }

        // New player drawing function
        function drawPlayer() {
            ctx.save();
            ctx.translate(player.x + player.diameter/2, player.y + player.diameter/2);
            
            // Draw coin body
            ctx.beginPath();
            ctx.arc(0, 0, player.diameter/2, 0, Math.PI * 2);
            ctx.fillStyle = player.color;
            ctx.fill();
            
            // Draw π symbol
            ctx.fillStyle = '#000';
            ctx.font = 'bold 24px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText('π', 0, 0);
            
            ctx.restore();
        }

        // Updated collision detection
        function checkCollision(obs) {
            const playerCenter = {
                x: player.x + player.diameter/2,
                y: player.y + player.diameter/2
            };
            const obsCenter = {
                x: obs.x + obs.width/2,
                y: obs.y + obs.height/2
            };
            
            // Simple circle-rect collision
            const closestX = Math.max(obs.x, Math.min(playerCenter.x, obs.x + obs.width));
            const closestY = Math.max(obs.y, Math.min(playerCenter.y, obs.y + obs.height));
            const distance = Math.sqrt(
                Math.pow(playerCenter.x - closestX, 2) +
                Math.pow(playerCenter.y - closestY, 2)
            );
            
            return distance < player.diameter/2;
        }

        // Updated draw function
        function draw() {
            // ... clear canvas and draw ground ...
            
            drawPlayer();  // Use new player drawing
            
            // ... rest of drawing code ...
        }

        // Reduced particle effects
        function createParticles() {
            for (let i = 0; i < 5; i++) { // Reduced from 10
                particles.push({
                    // ... existing properties ...
                    size: Math.random() * 2 + 1, // Smaller particles
                });
            }
        }
    </script>
</body>
</html>
